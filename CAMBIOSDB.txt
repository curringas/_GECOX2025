
-> IMPORTAR PRIMERO LAS TABLAS DE LARAVEL


+++++++++ CAMBIAR ORDEN EN CATEGORIAS ++++++++++++++++++++++++++
SET @rownum = 0;
UPDATE P0114_pagina
SET Orden = (@rownum := @rownum + 1)
ORDER BY Padre, Orden DESC;

***
ALTER TABLE `P0114_pagina` ADD `MetaTitle` VARCHAR(255) NULL AFTER `Url`, ADD `MetaDescription` VARCHAR(255) NULL AFTER `MetaTitle`;
ALTER TABLE `P0114_pagina` CHANGE `Url` `Url` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL;


ALTER TABLE `P0114_publicacion` CHANGE `Email` `Email` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_spanish_ci NULL DEFAULT NULL COMMENT 'Email para formularios';
ALTER TABLE `P0114_publicacion` CHANGE `Lugar` `Lugar` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_spanish_ci NULL DEFAULT NULL;
ALTER TABLE `P0114_publicacion` CHANGE `LugarTipo` `LugarTipo` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_spanish_ci NULL DEFAULT NULL;
ALTER TABLE `P0114_publicacion` CHANGE `Logotipo` `Logotipo` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_spanish_ci NULL DEFAULT NULL;
ALTER TABLE `P0114_publicacion` CHANGE `FechaInicio` `FechaInicio` DATE NULL DEFAULT NULL, CHANGE `FechaFin` `FechaFin` DATE NULL DEFAULT NULL;
ALTER TABLE `P0114_publicacion` CHANGE `FechaSalida` `FechaSalida` DATE NULL DEFAULT NULL;

ALTER TABLE `P0114_documentoenpublicacion`
  DROP PRIMARY KEY,
   ADD PRIMARY KEY(
     `Publicacion`,
     `Orden`
   );
  
  ALTER TABLE `P0114_banner` CHANGE `Codigo` `Codigo` TEXT CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL;
ALTER TABLE `P0114_bannerenpagina` CHANGE `Posicion` `Posicion` SMALLINT(6) NOT NULL DEFAULT '0' COMMENT '0 pequeño, 1 mediano, 2 grande';
ALTER TABLE `P0114_banner` CHANGE `Tipo` `Tipo` TINYINT(1) NULL DEFAULT NULL COMMENT '0 pequeño, 1 mediano, 2 grande';

ALTER TABLE `P0114_portada` CHANGE `Ticker` `Ticker` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `Titulo` `Titulo` VARCHAR(250) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `Contenido` `Contenido` TEXT CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `Foto` `Foto` VARCHAR(250) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `Principal` `Principal` INT(11) NULL DEFAULT '0', CHANGE `banner_cabeceraTitulo` `banner_cabeceraTitulo` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_cabeceraImagen` `banner_cabeceraImagen` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_cabeceraUrl` `banner_cabeceraUrl` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_cabeceraDestino` `banner_cabeceraDestino` VARCHAR(20) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_cabeceraCodigoFuente` `banner_cabeceraCodigoFuente` TEXT CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_izquierdaTitulo` `banner_izquierdaTitulo` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_izquierdaImagen` `banner_izquierdaImagen` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_izquierdaUrl` `banner_izquierdaUrl` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_izquierdaDestino` `banner_izquierdaDestino` VARCHAR(20) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_izquierdaCodigoFuente` `banner_izquierdaCodigoFuente` TEXT CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_derechaTitulo` `banner_derechaTitulo` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_derechaImagen` `banner_derechaImagen` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_derechaUrl` `banner_derechaUrl` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_derechaDestino` `banner_derechaDestino` VARCHAR(20) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_derechaCodigoFuente` `banner_derechaCodigoFuente` TEXT CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `Intersticial_imagen` `Intersticial_imagen` VARCHAR(100) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `Intersticial_link` `Intersticial_link` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_pieTitulo` `banner_pieTitulo` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_pieImagen` `banner_pieImagen` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_pieUrl` `banner_pieUrl` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_pieDestino` `banner_pieDestino` VARCHAR(20) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `banner_pieCodigoFuente` `banner_pieCodigoFuente` TEXT CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL;

ALTER TABLE `P0114_portada_slider` CHANGE `Publicacion` `Publicacion` VARCHAR(50) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `Imagen` `Imagen` INT(11) NULL, CHANGE `Automatico` `Automatico` INT(11) NULL, CHANGE `BannerImagen` `BannerImagen` VARCHAR(100) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `BannerTitulo` `BannerTitulo` VARCHAR(100) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `BannerUrl` `BannerUrl` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `BannerDestino` `BannerDestino` VARCHAR(20) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `BannerCodigoFuente` `BannerCodigoFuente` TEXT CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL;

ALTER TABLE `P0114_portada_derecha` CHANGE `Publicacion` `Publicacion` VARCHAR(50) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `Imagen` `Imagen` INT(11) NULL, CHANGE `Automatico` `Automatico` INT(11) NULL, CHANGE `BannerImagen` `BannerImagen` VARCHAR(100) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `BannerTitulo` `BannerTitulo` VARCHAR(100) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `BannerUrl` `BannerUrl` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `BannerDestino` `BannerDestino` VARCHAR(20) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `BannerCodigoFuente` `BannerCodigoFuente` TEXT CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `Orden` `Orden` INT(11) NULL;

ALTER TABLE `P0114_portada_izquierda` CHANGE `Publicacion` `Publicacion` VARCHAR(50) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `Imagen` `Imagen` INT(11) NULL, CHANGE `Automatico` `Automatico` INT(11) NULL, CHANGE `BannerImagen` `BannerImagen` VARCHAR(100) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `BannerTitulo` `BannerTitulo` VARCHAR(100) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `BannerUrl` `BannerUrl` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `BannerDestino` `BannerDestino` VARCHAR(20) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `BannerCodigoFuente` `BannerCodigoFuente` TEXT CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `Orden` `Orden` INT(11) NULL;

ALTER TABLE `P0114_portada_central` CHANGE `Publicacion` `Publicacion` VARCHAR(50) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `Imagen` `Imagen` INT(11) NULL, CHANGE `Automatico` `Automatico` INT(11) NULL, CHANGE `BannerImagen` `BannerImagen` VARCHAR(100) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `BannerTitulo` `BannerTitulo` VARCHAR(100) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `BannerUrl` `BannerUrl` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `BannerDestino` `BannerDestino` VARCHAR(20) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `BannerCodigoFuente` `BannerCodigoFuente` TEXT CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `Orden` `Orden` INT(11) NULL;
UPDATE `P0114_portada_slider` SET Publicacion=NULL WHERE Publicacion=0;
UPDATE `P0114_portada_slider` SET Imagen=NULL WHERE Imagen=0;
UPDATE `P0114_portada_slider` SET Automatico=NULL WHERE Automatico=0;
UPDATE `P0114_portada_central` SET Publicacion=NULL WHERE Publicacion=0;
UPDATE `P0114_portada_central` SET Imagen=NULL WHERE Imagen=0;
UPDATE `P0114_portada_central` SET Automatico=NULL WHERE Automatico=0;
UPDATE `P0114_portada_derecha` SET Publicacion=NULL WHERE Publicacion=0;
UPDATE `P0114_portada_derecha` SET Imagen=NULL WHERE Imagen=0;
UPDATE `P0114_portada_derecha` SET Automatico=NULL WHERE Automatico=0;
UPDATE `P0114_portada_izquierda` SET Publicacion=NULL WHERE Publicacion=0;
UPDATE `P0114_portada_izquierda` SET Imagen=NULL WHERE Imagen=0;
UPDATE `P0114_portada_izquierda` SET Automatico=NULL WHERE Automatico=0;

ALTER TABLE `P0114_portada_slider` CHANGE `Orden` `Orden` INT(11) NULL;


## Crear relaciones con Publicacion y Publicacion->Identificador

ALTER TABLE `P0114_portada` ADD `banner_cabeceraImagenMovil` VARCHAR(255) NULL AFTER `banner_pieCodigoFuente`, ADD `banner_izquierdaImagenMovil` VARCHAR(255) NULL AFTER `banner_cabeceraImagenMovil`, ADD `banner_derechaImagenMovil` VARCHAR(255) NULL AFTER `banner_izquierdaImagenMovil`, ADD `banner_pieImagenMovil` VARCHAR(255) NULL AFTER `banner_derechaImagenMovil`, ADD `Intersticial_imagenMovil` VARCHAR(255) NULL AFTER `banner_pieImagenMovil`;
ALTER TABLE `P0114_portada_central` ADD `BannerImagenMovil` VARCHAR(255) NULL AFTER `Orden`;
ALTER TABLE `P0114_portada_derecha` ADD `BannerImagenMovil` VARCHAR(255) NULL AFTER `Orden`;
ALTER TABLE `P0114_portada_izquierda` ADD `BannerImagenMovil` VARCHAR(255) NULL AFTER `Orden`;
ALTER TABLE `P0114_portada_slider` ADD `BannerImagenMovil` VARCHAR(255) NULL AFTER `Orden`;
ALTER TABLE `P0114_banner` ADD `BannerMovil` VARCHAR(255) NULL AFTER `Codigo`;

UPDATE `P0114_pagina` SET Padre = null WHERE Padre=-1


ALTER TABLE `users` CHANGE `dob` `dob` DATE NULL;
ALTER TABLE `users` CHANGE `avatar` `avatar` TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL;
